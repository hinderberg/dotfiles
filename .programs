
if test ! $(which brew); then
    echo "Installing homebrew.."
    ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
fi

# Update brew
brew update

# Update brew formula
brew upgrade

packages=(
    coreutils
    findutils
    bash
    m-cli
    python
    macvim
    vim
    maven
    mitmproxy
    findutils
    git
    bash-completion
    mongodb
    rethinkdb
    redis
    heroku-toolbelt
    imagemagick
    xctool
    docker
    docker-compose
    docker-machine
    docker-swarm
    watchman
    flow
    awsebcli
    carthage
)

# Install the packages
echo "Installing packages.."
brew install ${packages[@]}

apps=(
    visual-studio-code
    iterm2
    google-chrome
    firefox
    spotify
    vlc
    1password
    slack
    marked
    cheatsheet
    quicklook-json
    google-drive
    dropbox
    virtualbox
    jetbrains-toolbox
    ngrok
    vagrant
    java
    sourcetree
    spectacle
    postico
    sketch
    skype
)

echo "Installing apps.."
brew cask install ${apps[@]}

# Fonts

brew tap caskroom/fonts

fonts=(
  font-m-plus
  font-clear-sans
  font-roboto
  font-source-code-pro
  font-inconsolata
  font-hack
  font-fira-code
)

echo "Installing fonts..."
brew cask install ${fonts[@]}


# Brew cleanup
brew cleanup

# Install nvm

if test ! $(which nvm); then
    echo "Installing nvm.."
    curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.26.1/install.sh | bash
fi

[[ -s $HOME/.nvm/nvm.sh ]] && . $HOME/.nvm/nvm.sh  # This loads NVM

nvm install stable

npms=(
    react-native-cli,
    npm-check
)

npm install -g ${npms[@]}

pip install --user powerline-status
git clone https://github.com/powerline/fonts.git --depth=1
cd fonts
./install.sh
cd ..
rm -rf fonts
pip install --user powerline-gitstatus
